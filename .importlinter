# ===================================================================
# IMPORT-LINTER CONFIGURATION FOR HEXAGONAL ARCHITECTURE
# ===================================================================
# Esta configuración fuerza las reglas de arquitectura hexagonal
# para el proyecto incrementos_salariales con dos niveles:
#
# NIVEL 1: Reglas entre módulos funcionales (load, analyze, process, export)
# NIVEL 2: Reglas hexagonales dentro de cada módulo (domain, application, infrastructure)
# ===================================================================

[importlinter]
# Paquete raíz del proyecto que será analizado
root_package = advent_of_code

# ===================================================================
# NIVEL 1: DEPENDENCIAS ENTRE MÓDULOS FUNCIONALES
# ===================================================================

# ===================================================================
# CONTRATO 1: FORBIDDEN - Analyze es independiente (núcleo del negocio)
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: 'analyze' contiene la lógica de negocio principal y debe ser
#            completamente independiente de otros módulos funcionales
# FUNCIONAMIENTO: Prohíbe que analyze importe desde load, process o export
#
# RAZÓN: En arquitectura hexagonal, el núcleo del negocio (analyze) debe
#        ser independiente de detalles de implementación externos
#
# EJEMPLO DE VIOLACIÓN: Si analyze/incrementos/filter_enero_2025.py
#                      importa desde load/file_name_metadata_extractor.py
# ===================================================================
[importlinter:contract:analyze-independence]
name = Analyze Module Independence - Core Business Logic
type = forbidden
source_modules =
    advent_of_code.analyze
forbidden_modules =
    advent_of_code.load
    advent_of_code.process
    advent_of_code.export

# ===================================================================
# CONTRATO 2: FORBIDDEN - Load no puede usar analyze, process ni export
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: 'load' es responsable solo de cargar datos y no debe depender
#            de lógica de procesamiento, análisis o exportación
# FUNCIONAMIENTO: Prohíbe que load importe desde analyze, process o export
#
# RAZÓN: Load debe ser un adaptador puro de entrada, sin conocimiento
#        de lo que se hará con los datos que carga
#
# EJEMPLO DE VIOLACIÓN: Si load/file_name_metadata_extractor.py importa
#                      desde analyze/incrementos/filter_enero_2025.py
# ===================================================================
[importlinter:contract:load-isolation]
name = Load Module Isolation - Pure Input Adapter
type = forbidden
source_modules =
    advent_of_code.load
forbidden_modules =
    advent_of_code.analyze
    advent_of_code.process
    advent_of_code.export

# ===================================================================
# CONTRATO 3: FORBIDDEN - Process es independiente
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: 'process' no debe depender de la lógica de load, análisis
#            ni exportación
# FUNCIONAMIENTO: Prohíbe que process importe desde analyze, load o export
#
# RAZÓN: Process debe enfocarse en transformar/preparar datos, usando
#        solo los datos cargados
#
# EJEMPLO DE VIOLACIÓN: Si process/maestro_de_personal/mp_steps.py importa
#                      desde analyze/incrementos/i_analyze.py
# ===================================================================
[importlinter:contract:process-limited-dependencies]
name = Process Module Limited Dependencies - Only Load Allowed
type = forbidden
source_modules =
    advent_of_code.process
forbidden_modules =
    advent_of_code.analyze
    advent_of_code.export
    advent_of_code.load

# ===================================================================
# CONTRATO 4: FORBIDDEN - Export es independiente
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: 'export' debe ser un adaptador puro de salida, independiente
#            de otros módulos funcionales
# FUNCIONAMIENTO: Prohíbe que export importe desde load, analyze o process
#
# RAZÓN: Export debe recibir datos ya procesados/analizados sin conocer
#        los detalles de cómo se obtuvieron o procesaron
#
# EJEMPLO DE VIOLACIÓN: Si export/algún_archivo.py importa desde
#                      load/file_name_metadata_extractor.py
# ===================================================================
[importlinter:contract:export-independence]
name = Export Module Independence - Pure Output Adapter
type = forbidden
source_modules =
    advent_of_code.export
forbidden_modules =
    advent_of_code.load
    advent_of_code.analyze
    advent_of_code.process

# ===================================================================
# NIVEL 2: ARQUITECTURA HEXAGONAL DENTRO DE CADA MÓDULO
# ===================================================================
# Estas reglas se aplicarán cuando tengas las subcarpetas domain/application/infrastructure

# ===================================================================
# CONTRATO 5: LAYERS - Domain -> Application -> Infrastructure
# ===================================================================
# TIPO: layers
# PROPÓSITO: Define la jerarquía hexagonal dentro de cada módulo funcional
# FUNCIONAMIENTO: Infrastructure puede usar Application y Domain,
#                Application puede usar Domain, pero Domain no puede usar nada
#
# JERARQUÍA (de más externa a más interna):
# 1. infrastructure -> Adaptadores, detalles técnicos (más externa)
# 2. application    -> Casos de uso, orquestación (intermedia)
# 3. domain         -> Entidades, reglas de negocio (más interna)
#
# EJEMPLO DE VIOLACIÓN: Si domain/entities.py importa desde
#                      infrastructure/repositories.py
# ===================================================================
#[importlinter:contract:hexagonal-layers-within-modules]
# name = Hexagonal Architecture Layers Within Each Module
# type = layers
# containers =
#    incrementos_salariales.load
#    incrementos_salariales.analyze
#    incrementos_salariales.process
#    incrementos_salariales.export
# layers =
#    infrastructure
#    application
#    domain

# ===================================================================
# CONTRATO 6: FORBIDDEN - Domain nunca depende de Application o Infrastructure
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: Garantizar que el dominio de cada módulo sea puro y no dependa
#            de detalles de aplicación o infraestructura
# FUNCIONAMIENTO: Prohíbe que cualquier archivo en */domain/* importe
#                desde */application/* o */infrastructure/*
#
# RAZÓN: El dominio debe contener solo reglas de negocio puras, sin
#        dependencias externas
#
# EJEMPLO DE VIOLACIÓN: Si load/domain/entities.py importa desde
#                      load/infrastructure/file_reader.py
# ===================================================================
#[importlinter:contract:domain-purity]
#name = Domain Layer Purity - No External Dependencies
#type = forbidden
#source_modules =
#    incrementos_salariales.*.domain
# forbidden_modules =
#    incrementos_salariales.*.application
#    incrementos_salariales.*.infrastructure

# ===================================================================
# CONTRATO 7: FORBIDDEN - Application no puede depender de Infrastructure
# ===================================================================
# TIPO: forbidden
# PROPÓSITO: Los casos de uso (application) no deben depender de detalles
#            de implementación (infrastructure)
# FUNCIONAMIENTO: Prohíbe que */application/* importe desde */infrastructure/*
#
# RAZÓN: Application debe depender solo de abstracciones (domain), no de
#        implementaciones concretas (infrastructure)
#
# EJEMPLO DE VIOLACIÓN: Si process/application/use_cases.py importa desde
#                      process/infrastructure/database_repository.py
# ===================================================================
# [importlinter:contract:application-infrastructure-separation]
# name = Application-Infrastructure Separation - No Concrete Dependencies
# type = forbidden
# source_modules =
#     incrementos_salariales.*.application
# forbidden_modules =
#    incrementos_salariales.*.infrastructure
